# https://github.com/aliyoussefi/EasyRepro
name: TestingEasyReproWithDotNetFramework
# Controls when the workflow will run

on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  workflow_dispatch:
# A workflow run is made up of one or more jobs that can run sequentially or in parallel

jobs:
  # This workflow contains a single job called "build"
  Test_EasyRepro_DotNetFramework:
    runs-on: windows-latest
    env:
      RUNNER_DEBUG: 1

    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v4
      - name: Checkout Easy Repro
        uses: actions/checkout@v4
        with:
          repository: microsoft/EasyRepro
          # ref: develop
          #token: ${{ secrets.AAINTERNAL_READONLY_PAT }} # Access token
          path: easyrepro

      - name: setup-msbuild
        uses: microsoft/setup-msbuild@v2
        #with:
          # Folder location of where vswhere.exe is located if a self-hosted agent
          #vswhere-path: # optional
          # Version of Visual Studio to search; defaults to latest if not specified
         # vs-version: # optional
          # Enable searching for pre-release versions of Visual Studio/MSBuild
          #vs-prerelease: # optional
          # The preferred processor architecture of MSBuild. Can be either "x86", "x64", or "arm64". "x64" is only available from Visual Studio version 17.0 and later.
          #msbuild-architecture: # optional, default is x86
      - name: Build app for release
        run: msbuild easyrepro\UIAutomation.sln -t:rebuild -verbosity:diag -property:Configuration=Release  

      - name: Install dependencies
        run: |
          dir
          cd easyrepro
          dotnet restore

 
